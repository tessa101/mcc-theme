/* ==========================================================
   MCC â€” Coffee Layout (placement only)
   Scope: pages with <body class="layout-coffee">
   ========================================================== */

/* Shell & main grid */
.layout-coffee .pdp{max-width:1400px;margin:0 auto;padding:0 20px}
.layout-coffee .pdp-grid{display:grid;grid-template-columns:5fr 3fr;gap:60px}
@media (max-width:1024px){.layout-coffee .pdp-grid{grid-template-columns:1fr;gap:32px}}

/* Sticky buy column */
.layout-coffee .buy{position:sticky;top:24px}

/* Gallery placement */
.layout-coffee .product-gallery{margin-bottom:40px;position:relative;z-index:2;width:100%;max-width:none}
.layout-coffee .gallery-grid{
  display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:2px;
  height:80vh;max-height:1200px;min-height:400px;position:relative
}
.layout-coffee .gallery-main{
  grid-column:1/3;grid-row:1/2;overflow:hidden;cursor:pointer;position:relative;width:100%;height:100%
}
.layout-coffee .gallery-main img{
  width:100%;height:100%;object-fit:cover;object-position:center;display:block
}
.layout-coffee .gallery-secondary{grid-column:1/3;grid-row:2/3;display:grid;grid-template-columns:1fr 1fr;gap:2px;position:relative;height:100%;width:100%}
.layout-coffee .gallery-thumb{overflow:hidden;cursor:pointer;transition:opacity .2s;position:relative;height:100%;width:100%}

/* Hero Gallery Variant */
.layout-coffee .gallery-hero{width:100%;position:relative}
.layout-coffee .gallery-hero-container{position:relative;width:100%}
.layout-coffee .gallery-hero-image{width:100%;position:relative;overflow:hidden;cursor:pointer}
.layout-coffee .gallery-hero-image img{width:100%;height:auto;display:block;object-fit:cover}
.layout-coffee .gallery-hero-image picture{display:block;width:100%}
.layout-coffee .gallery-hero-image[data-hero-gallery]{cursor:pointer}
.layout-coffee .gallery-hero-indicator{
  position:absolute;bottom:16px;right:16px;
  background:rgba(0,0,0,0.6);color:#fff;
  padding:8px 12px;border-radius:4px;
  font-size:14px;font-weight:500;
  pointer-events:none
}
@media (max-width:768px){
  .layout-coffee .gallery-hero-indicator{bottom:12px;right:12px;padding:6px 10px;font-size:12px}
}

/* Vertical Gallery Variant */
.layout-coffee .gallery-vertical{width:100%;position:relative;margin-bottom:40px;--mcc-merch-gap:2px}
.layout-coffee .gallery-vertical-rail,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-rail{
  display:grid !important;grid-template-columns:1fr 1fr !important;gap:var(--mcc-merch-gap) !important;
  height:auto !important;min-height:0 !important;max-height:none !important;overflow:visible !important;
  grid-auto-flow:row dense !important;
  list-style:none !important;margin:0 !important;padding:0 !important
}
.layout-coffee .gallery-vertical-item:first-child,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-item:first-child{
  grid-column:1/-1 !important
}
.layout-coffee .gallery-vertical-item > *,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-item > *{
  display:block !important;width:100% !important;height:auto !important
}
.layout-coffee .gallery-vertical-item,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-item{
  opacity:0 !important;transform:translateY(40px) !important;
  transition:opacity 0.8s cubic-bezier(0.33,0.02,0.1,1) !important,transform 0.8s cubic-bezier(0.33,0.02,0.1,1) !important;
  transition-delay:calc(var(--mcc-stagger,0) * 80ms) !important;
  display:block !important
}
.layout-coffee .gallery-vertical-item.is-inview,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-item.is-inview{
  opacity:1 !important;transform:none !important
}
.layout-coffee .gallery-vertical-item:first-child,
.layout-coffee .product-gallery.gallery-vertical .gallery-vertical-item:first-child{
  opacity:1 !important;transform:none !important;transition-delay:0ms !important
}

/* Carousel Gallery Variant */
.layout-coffee .gallery-carousel{width:100%;position:relative;margin-bottom:40px}
.layout-coffee .gallery-carousel-slider,
.layout-coffee slider-component.gallery-carousel-slider{
  position:relative
}
.layout-coffee .gallery-carousel-list{
  display:flex !important;flex-direction:row !important;
  overflow-x:auto;overflow-y:hidden;
  scroll-snap-type:x mandatory;scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;width:100%;
  list-style:none;margin:0;padding:0
}
.layout-coffee .gallery-carousel-list.product__media-list{
  flex-direction:row !important
}
.layout-coffee .gallery-carousel-slide{
  flex:0 0 100%;flex-shrink:0;scroll-snap-align:start;
  position:relative;width:100%;min-width:100%;max-width:100%
}
.layout-coffee .gallery-carousel-image{
  width:100%;position:relative;overflow:hidden
}
.layout-coffee .gallery-carousel-image img{
  width:100%;height:auto;display:block;object-fit:cover
}
.layout-coffee .gallery-carousel-image picture{display:block;width:100%}
.layout-coffee .gallery-carousel-prev,
.layout-coffee .gallery-carousel-next{
  position:absolute;bottom:16px;transform:none;
  z-index:10;background:rgba(255,255,255,0.9);
  border-radius:50%;width:44px;height:44px;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;transition:background 0.2s;pointer-events:auto
}
.layout-coffee slider-component.gallery-carousel-slider .gallery-carousel-prev,
.layout-coffee slider-component.gallery-carousel-slider .gallery-carousel-next{
  position:absolute;bottom:16px
}
.layout-coffee .gallery-carousel-prev:hover,
.layout-coffee .gallery-carousel-next:hover{background:rgba(255,255,255,1)}
.layout-coffee .gallery-carousel-prev,
.layout-coffee slider-component.gallery-carousel-slider .gallery-carousel-prev{right:60px}
.layout-coffee .gallery-carousel-next,
.layout-coffee slider-component.gallery-carousel-slider .gallery-carousel-next{right:16px}
.layout-coffee .gallery-carousel-dots{
  display:flex;justify-content:center;gap:8px;
  margin-top:16px;position:absolute;bottom:16px;
  left:50%;transform:translateX(-50%);z-index:10
}
.layout-coffee .gallery-carousel-dot{
  width:8px;height:8px;border-radius:50%;
  background:rgba(255,255,255,0.5);border:none;
  cursor:pointer;padding:0;transition:background 0.2s,transform 0.2s
}
.layout-coffee .gallery-carousel-dot.is-active,
.layout-coffee .gallery-carousel-dot[aria-current="true"]{
  background:rgba(255,255,255,1);
  transform:scale(1.2)
}
.layout-coffee .gallery-carousel-dot .dot{display:block;width:100%;height:100%}
@media (max-width:768px){
  .layout-coffee .gallery-carousel-prev,
  .layout-coffee .gallery-carousel-next{width:36px;height:36px}
  .layout-coffee .gallery-carousel-prev{left:8px}
  .layout-coffee .gallery-carousel-next{right:8px}
  .layout-coffee .gallery-carousel-dots{bottom:12px;gap:6px}
  .layout-coffee .gallery-carousel-dot{width:6px;height:6px}
}

/* Content stack spacing */
.layout-coffee .product-sections{display:flex;flex-direction:column;gap:40px;position:relative;z-index:1;padding:0 40px}
.layout-coffee .content-section{position:relative;padding:0}

/* Flavor cards (layout sizing only; visuals are global) */
:root{--flavor-card-w:190px;--flavor-card-h:230px;--flavor-gap:16px}
.layout-coffee .flavor-profiles{margin-top:40px}
/* Desktop: Responsive grid that adapts to container width */
@media (min-width:769px){
  .layout-coffee .flavor-profiles .flavor-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,var(--flavor-card-w));
    gap:var(--flavor-gap);
    justify-content:start;
    align-items:start
  }
}
.layout-coffee .flavor-profiles .flavor-card{
  width:var(--flavor-card-w);height:var(--flavor-card-h);
  margin:0;
  box-sizing:border-box;
  display:grid;grid-template-rows:120px auto 1fr;align-content:start
}
/* Responsive column adjustments for different container widths */
@media (min-width:1400px){
  .layout-coffee .flavor-profiles .flavor-grid{grid-template-columns:repeat(auto-fit,190px);max-width:100%}
  .layout-coffee .flavor-profiles .flavor-card{width:190px}
}
@media (min-width:1024px) and (max-width:1399px){
  .layout-coffee .flavor-profiles .flavor-grid{grid-template-columns:repeat(auto-fit,180px)}
  .layout-coffee .flavor-profiles .flavor-card{width:180px}
}
@media (min-width:769px) and (max-width:1023px){
  .layout-coffee .flavor-profiles .flavor-grid{grid-template-columns:repeat(auto-fit,170px)}
  .layout-coffee .flavor-profiles .flavor-card{width:170px}
}

/* Details (made/growing) placement */
.layout-coffee .made-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px 32px}
.layout-coffee .made-grid.two-by-two{grid-template-columns:repeat(2,200px);justify-content:left;gap:24px 48px}
.layout-coffee .made-grid.two-by-two .made-col{display:grid;grid-auto-rows:min-content;gap:16px}
@media (max-width:520px){.layout-coffee .made-grid.two-by-two{grid-template-columns:1fr;gap:20px}}

.layout-coffee .growing-details .growing-wrap{display:grid;grid-template-columns:1fr 300px;gap:24px 32px;align-items:start}
.layout-coffee .growing-details .growing-list{display:grid;gap:16px}
@media (max-width:860px){
  .layout-coffee .growing-details .growing-wrap{grid-template-columns:1fr}
  .layout-coffee .growing-details .growing-map{order:1}
  .layout-coffee .growing-details .growing-list{order:2}
}

/* Brew grid */
.layout-coffee .brew-methods{margin-top:40px}
.layout-coffee .brew-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
@media (max-width:768px){
  .layout-coffee .brew-grid{grid-template-columns:1fr;gap:16px}
  .layout-coffee .brew-card{display:grid;grid-template-columns:auto 1fr;align-items:center;text-align:left;padding:24px}
}

/* Recommended (count/columns only) */
.layout-coffee .recommended-section{padding:40px 0}
.layout-coffee .recommended-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}
@media (min-width:769px){.layout-coffee .recommended-grid{grid-template-columns:repeat(3,minmax(0,1fr));gap:20px}}

/* Sidebar container (no colors here) */
.layout-coffee .product-sidebar{height:fit-content;width:100%}

/* Mobile reflow */
@media (max-width:768px){
  .layout-coffee .product-hero-mobile{display:block;margin-bottom:20px;width:100%;order:1}
  .layout-coffee .product-gallery{display:none}
  .layout-coffee .product-main{width:100%;order:3}
  .layout-coffee .product-sidebar{width:100%;order:2;position:static}
  .layout-coffee .product-sections{padding:0 20px 20px;gap:20px;width:100%}
  .layout-coffee .content-section{padding:20px;border-radius:12px;width:100%;box-sizing:border-box}
}

/* === Cart Drawer Layer Fix (for Coffee/Cold Brew) === */
/* Ensure cart drawer z-index is above header and all other content */

/* Global selectors to override component-cart-drawer.css (z-index 1300) */
/* These must be global (not scoped) to work before body class is applied */
cart-drawer,
#CartDrawer,
[data-cart-drawer] {
  z-index: 12000 !important;
}

/* Override .drawer class z-index from component-cart-drawer.css */
.drawer {
  z-index: 12000 !important;
}

/* Scoped selectors (backup, in case global doesn't match) */
.layout-coffee cart-drawer,
.layout-coffee #CartDrawer,
.layout-coffee [data-cart-drawer] {
  z-index: 12000 !important;
}

.layout-coffee .shopify-section-cart-drawer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 12000 !important;
  pointer-events: none;
}

.layout-coffee .shopify-section-cart-drawer cart-drawer {
  pointer-events: auto;
  z-index: 12000 !important;
}

.layout-coffee .shopify-section-cart-drawer .drawer,
.layout-coffee cart-drawer.drawer {
  z-index: 12000 !important;
}

.layout-coffee .shopify-section-cart-drawer .cart-drawer__overlay,
.layout-coffee cart-drawer .cart-drawer__overlay {
  z-index: 12000 !important;
}

.layout-coffee cart-drawer,
.layout-coffee .cart-drawer {
  z-index: 12000 !important;
}

/* Ensure header stays above other content but below cart drawer */
/* Global selectors to override base.css z-index rules */
.header-wrapper {
  z-index: 2000 !important;
}

.section-header.shopify-section-group-header-group {
  z-index: 2000 !important;
}

/* Scoped selectors (backup) */
.layout-coffee header.header,
.layout-coffee #shopify-section-header,
.layout-coffee .section-header.shopify-section-group-header-group {
  z-index: 2000 !important;
}
