{% comment %} MCC Landing — Hero (page-scoped transparent header + controllable title sizes) {% endcomment %}
<section
  class="mcc-hero"
  data-mcc-landing="hero"
  data-invert-header="{{ section.settings.invert_header_colors }}"
  style="
    --vh: {{ section.settings.desktop_height_vh | default: 88 }}vh;
    --mcc-hero-title-mobile: {{ section.settings.title_size_mobile | default: 56 }}px;
    --mcc-hero-title-desktop: {{ section.settings.title_size_desktop | default: 70 }}px;
  "
>
  {% if section.settings.image != blank %}
    {{ section.settings.image | image_url: width: 2400 | image_tag: class: 'mcc-hero__img', alt: section.settings.image.alt | escape }}
  {% endif %}

  <div class="mcc-hero__overlay" data-cascade>
    {% if section.settings.logo != blank %}
      {{ section.settings.logo | image_url: width: 320 | image_tag: class: 'mcc-hero__logo scroll-trigger animate--fade-in scroll-trigger--offscreen', alt: section.settings.logo.alt | escape }}
    {% endif %}
    {% if section.settings.heading != blank %}
      <h1 class="mcc-hero__title scroll-trigger animate--fade-in scroll-trigger--offscreen">{{ section.settings.heading }}</h1>
    {% endif %}
    {% if section.settings.subheading != blank %}
      <p class="mcc-hero__sub scroll-trigger animate--fade-in scroll-trigger--offscreen">{{ section.settings.subheading }}</p>
    {% endif %}
    {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
      <a class="mcc-hero__cta scroll-trigger animate--fade-in scroll-trigger--offscreen" href="{{ section.settings.cta_link }}">{{ section.settings.cta_label }}</a>
    {% endif %}
  </div>
</section>

<style>
/* Hero section starts from top of viewport to sit behind header */
.is-landing-mcc #MainContent {
  padding-top: 0 !important;
  margin-top: 0 !important;
}
/* Remove all spacing from header group that might push content down */
.is-landing-mcc .shopify-section-group-header-group {
  margin-bottom: 0 !important;
}
.is-landing-mcc .section-header {
  margin-bottom: 0 !important;
}
.is-landing-mcc .shopify-section:has(.mcc-hero) {
  margin-top: 0 !important;
  padding-top: 0 !important;
  margin-bottom: 0 !important;
  background: transparent !important;
  background-color: transparent !important;
  position: relative !important;
}
.is-landing-mcc .shopify-section:has(.mcc-hero) .mcc-hero {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  position: relative !important;
}
/* Ensure hero image extends to top of viewport behind header */
.is-landing-mcc .mcc-hero__img {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}
/* On mobile, ensure hero starts from very top (behind announcement bar) */
@media screen and (max-width: 989px) {
  .is-landing-mcc .shopify-section:has(.mcc-hero) {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  .is-landing-mcc .mcc-hero {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
}
/* Remove gap between hero and next section */
.is-landing-mcc .shopify-section:has(.mcc-hero) + .shopify-section {
  margin-top: 0 !important;
  padding-top: 0 !important;
}
.mcc-hero{ position:relative; height:var(--vh,88vh); min-height:560px; display:grid; place-items:center; overflow:hidden; }
.mcc-hero__img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
/* 
  NOTE: Fix for hero image gap at 1420px breakpoint
  When viewport shrinks below 1420px, add this media query to prevent gaps:
  
  @media (max-width: 1420px) {
    .mcc-hero__img {
      transform: scale(1.08);
      transform-origin: center center;
      width: calc(100% + 16px);
      height: calc(100% + 16px);
      left: -8px;
      top: -8px;
    }
  }
*/
.mcc-hero__overlay{ position:relative; z-index:1; text-align:center; color:#fff; padding:clamp(24px,4vw,48px); }
.mcc-hero__logo{ display:block; margin:0 auto 16px; height:auto; }
.mcc-hero__title{
  font-family: 'Passion One', var(--font-sans); 
  font-weight:400; letter-spacing:-.01em; line-height:1.1; color: #fff; margin:8px 0;
  font-size: var(--mcc-hero-title-mobile,56px);
}
@media (min-width: 740px){
  .mcc-hero__title{ 
    font-size: var(--mcc-hero-title-desktop,70px) !important; 
  }
}
.mcc-hero__sub{ font-size:clamp(16px,2.2vw,20px); opacity:.9; margin:8px 0 20px; }
.mcc-hero__cta{ display:inline-block; padding:12px 20px; border-radius:999px; background:#fff; color:#111; text-decoration:none; font-weight:600; }

/* Hero text animation - less travel distance with dramatic easing */
.mcc-hero__overlay .scroll-trigger.scroll-trigger--offscreen {
  transform: translateY(20px);
}
.mcc-hero__overlay .scroll-trigger {
  transition: opacity 0.9s cubic-bezier(0.16, 1, 0.3, 1), transform 0.9s cubic-bezier(0.16, 1, 0.3, 1);
}
</style>



<script>
(() => {
  const body = document.body;
  if (!body.classList.contains('is-landing-mcc')) return;

  // Find this hero section node
  const hero = document.currentScript.closest('.shopify-section') || document.querySelector('[data-mcc-landing="hero"]');
  if (!hero) return;

  const invertOn = hero.dataset.invertHeader === 'true';

  const apply = (inView) => {
    // Remove both classes first to prevent conflicts, then add the correct one
    body.classList.remove('mcc-landing-header--transparent', 'mcc-landing-header--solid');
    if (inView) {
      body.classList.add('mcc-landing-header--transparent');
    } else {
      body.classList.add('mcc-landing-header--solid');
    }
    body.classList.toggle('mcc-landing-header--invert', inView && invertOn);
  };

  const reassess = () => {
    const r = hero.getBoundingClientRect();
    const inView = r.bottom > 0 && r.top < window.innerHeight;
    apply(inView);
  };

  // Run immediately, then on scroll/resize
  reassess();
  window.addEventListener('scroll', reassess, { passive: true });
  window.addEventListener('resize', reassess);
})();
</script>


{% schema %}
{
  "name": "MCC Landing — Hero",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Hero image" },
    { "type": "image_picker", "id": "logo", "label": "Optional logo over hero" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "COLD BREW." },
    { "type": "text", "id": "subheading", "label": "Subheading" },
    { "type": "text", "id": "cta_label", "label": "Button label" },
    { "type": "url", "id": "cta_link", "label": "Button link" },
    { "type": "range", "id": "desktop_height_vh", "min": 60, "max": 100, "step": 1, "label": "Height (vh)", "default": 88 },
    { "type": "number", "id": "title_size_desktop", "label": "Title size (desktop px)", "default": 70 },
    { "type": "number", "id": "title_size_mobile",  "label": "Title size (mobile px)",  "default": 56 },
    { "type": "checkbox", "id": "invert_header_colors", "label": "Invert header colors over hero", "default": true }
  ],
  "presets": [{ "name": "MCC Landing — Hero" }]
}
{% endschema %}
