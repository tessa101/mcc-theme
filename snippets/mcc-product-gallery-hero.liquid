{% comment %}
MCC Product Gallery - Single Hero Image Variant
One full-width hero image with optional click-to-cycle functionality
{% endcomment %}

{%- liquid
  assign desktop_image = product.featured_media
  assign mobile_image = product.media[3] | default: product.featured_media
  assign all_images = product.media | where: 'media_type', 'image'
  assign enable_click_cycle = block.settings.enable_click_cycle
  assign current_index = 0
-%}

<div class="product-gallery gallery-hero" data-gallery-hero data-enable-cycle="{{ enable_click_cycle }}">
  {% if desktop_image or mobile_image %}
    <div class="gallery-hero-container">
      {% if enable_click_cycle and all_images.size > 1 %}
        <div class="gallery-hero-image" data-hero-gallery onclick="if(window.MCC && window.MCC.cycleHeroImage) { window.MCC.cycleHeroImage(event, '{{ section.id }}'); }">
          <picture>
            {% if mobile_image and mobile_image != desktop_image %}
              <source media="(max-width: 749px)" srcset="{{ mobile_image | image_url: width: 800 }}">
            {% endif %}
            <img
              id="main-product-image"
              src="{{ desktop_image | image_url: width: 1200 }}"
              alt="{{ desktop_image.alt | escape }}"
              loading="eager"
              width="1200"
              height="800"
              data-hero-index="0"
            />
          </picture>
        </div>
        <div class="gallery-hero-indicator" data-hero-indicator>
          <span data-hero-current>1</span> / <span data-hero-total>{{ all_images.size }}</span>
        </div>
      {% else %}
        <div class="gallery-hero-image">
          <picture>
            {% if mobile_image and mobile_image != desktop_image %}
              <source media="(max-width: 749px)" srcset="{{ mobile_image | image_url: width: 800 }}">
            {% endif %}
            <img
              id="main-product-image"
              src="{{ desktop_image | image_url: width: 1200 }}"
              alt="{{ desktop_image.alt | escape }}"
              loading="eager"
              width="1200"
              height="800"
            />
          </picture>
        </div>
      {% endif %}
    </div>
  {% endif %}
</div>

{% if enable_click_cycle and all_images.size > 1 %}
<script type="application/json" data-hero-images="{{ section.id }}">
  [
    {% for image in all_images %}
      {
        "src": "{{ image | image_url: width: 1200 }}",
        "alt": "{{ image.alt | escape }}",
        "mobile_src": "{{ image | image_url: width: 800 }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
</script>
{% endif %}

